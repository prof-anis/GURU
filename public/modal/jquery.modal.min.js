/*
    A simple jQuery modal (http://github.com/kylefox/jquery-modal)
    Version 0.2.5
*/
(function(a){function d(a){a.elm.css({position:"fixed",top:"50%",left:"50%",marginTop:-(a.elm.outerHeight()/2),marginLeft:-(a.elm.outerWidth()/2),zIndex:a.options.zIndex+1})}function c(b){b.preventDefault();var c=a(this).attr("href");if(/^#/.test(c)){a(c).modal()}else{a.get(c,{},function(b){a("<div/>").html(b).appendTo("body").bind("modal:close",function(a,b){b.elm.remove()}).modal()})}}var b=null;a.fn.modal=function(e){function h(){d(b);if(e.showClose){b.closeButton=a('<a href="#close-modal" rel="modal:close" class="close-modal">'+e.closeText+"</a>");b.elm.append(b.closeButton)}f.addClass(e.modalClass+" current").show();f.trigger(a.fn.modal.OPEN,[b])}function g(){b.blocker=a('<div class="jquery-modal blocker"></div>').css({top:0,right:0,bottom:0,left:0,width:"100%",height:"100%",position:"fixed",zIndex:e.zIndex,background:e.overlay,opacity:e.opacity});if(e.escapeClose){a(document).bind("keydown.modal",function(b){if(b.which==27){a.fn.modal.close()}})}if(e.clickClose){b.blocker.click(a.fn.modal.close)}a("body").append(b.blocker);f.trigger(a.fn.modal.BLOCK,[b])}var f=a(this);if(f.attr("href")){f.click(c);return}e=a.extend({},a.fn.modal.defaults,e);b={elm:f,options:e};f.trigger(a.fn.modal.BEFORE_BLOCK,[b]);g();f.trigger(a.fn.modal.BEFORE_OPEN,[b]);h()};a.fn.modal.defaults={overlay:"#000",opacity:.75,zIndex:1,escapeClose:true,clickClose:true,closeText:"Close",modalClass:"modal",showClose:true};a.fn.modal.BEFORE_BLOCK="modal:before-block";a.fn.modal.BLOCK="modal:block";a.fn.modal.BEFORE_OPEN="modal:before-open";a.fn.modal.OPEN="modal:open";a.fn.modal.BEFORE_CLOSE="modal:before-close";a.fn.modal.CLOSE="modal:close";a.fn.modal.close=function(c){if(c){c.preventDefault()}if(!b){return}b.elm.trigger(a.fn.modal.BEFORE_CLOSE,[b]);if(b.closeButton){b.closeButton.remove()}b.blocker.remove();b.elm.removeClass("current").hide();b.elm.trigger(a.fn.modal.CLOSE,[b]);b=null;a(document).unbind("keydown.modal")};a.fn.modal.resize=function(){d(b)};a('a[rel="modal:open"]').live("click",c);a('a[rel="modal:close"]').live("click",a.fn.modal.close)})(jQuery)